### Table of Contents

- [Brazil](#brazil)
  - [brazil.buildDir](#brazil-builddir)
  - [brazil.buildTools](#brazil-buildtools)
  - [brazil.commonJsLibDir](#brazil-commonjslibdir)
  - [brazil.documentationDir](#brazil-documentationdir)
  - [brazil.generateCoverageData([coverageDir][, options])](#brazil-generatecoveragedata-coveragedir-options-)
  - [brazil.generateCoverageDataSync([coverageDir][, options])](#brazil-generatecoveragedatasync-coveragedir-options-)
  - [generate-coverage-data \[coverageDir\] \[--language <language>\]](#generate-coverage-data-coveragedir-language-language-)
  - [brazil.generatedMakeDir](#brazil-generatedmakedir)
  - [brazil.integOutputDir](#brazil-integoutputdir)
  - [brazil.libDir](#brazil-libdir)
  - [brazil.packageIdentifier](#brazil-packageidentifier)
  - [brazil.packageMajorVersion](#brazil-packagemajorversion)
  - [brazil.packageName](#brazil-packagename)
  - [brazil.privateDir](#brazil-privatedir)
  - [brazil.runPathRecipe(recipe)](#brazil-runpathrecipe-recipe-)
  - [brazil.runPathRecipeSync(recipe)](#brazil-runpathrecipesync-recipe-)
  - [brazil.srcDir](#brazil-srcdir)
  - [brazil.testOutputDir](#brazil-testoutputdir)
  - [brazil.tmpDir](#brazil-tmpdir)
  - [brazil.workspaceRoot](#brazil-workspaceroot)

---

# Brazil

[![Pipeline](https://badges.corp.amazon.com/pipeline/NodeJS-FirstPartyLibraries.status_blocked.svg)](https://pipelines.amazon.com/pipelines/NodeJS-FirstPartyLibraries)
![Coverage](https://badges.corp.amazon.com/coverage/NodeJS/first-party-libraries/NodeJS-Brazil.svg)
[![NpmPrettyMuch](https://badges.corp.amazon.com/dynamic/key=NpmPrettyMuch&value=compatible&color=blue.svg)](https://code.amazon.com/packages/NpmPrettyMuch)
[![HappyNpm](https://badges.corp.amazon.com/dynamic/key=HappyNpm&value=compatible&color=blue.svg)](https://code.amazon.com/packages/HappyNpm)
[![CodeArtifact](https://badges.corp.amazon.com/dynamic/key=CodeArtifact&value=compatible&color=blue.svg)](https://builderhub.corp.amazon.com/docs/codeartifact/user-guide)

> Interact with Brazil.

Assumes you're bringing your own [`BrazilPath`](https://code.amazon.com/packages/BrazilPath) dependency.

```javascript
const path = require("path");
const { srcDir } = require("@amzn/brazil");

// use package source root
const dist = path.join(srcDir, "dist");
```

---

## brazil.buildDir

##### Added in: v1.0

- `<string>`

Absolute path to the package build root.

## brazil.buildTools

##### Added in: v1.0

- `<string[]>`

Absolute paths to the symlink farms for the `build-tools` closure.

## brazil.commonJsLibDir

##### Added in: v1.0

- `<string>`

Absolute path to `lib/commonjs` directory.

## brazil.documentationDir

##### Added in: v1.0

- `<string>`

Absolute path to `brazil-documentation` directory.

## brazil.generateCoverageData([options])

##### Added in: v1.0

- `options` `<object>`
  - `coverageDir` `<string>` **Default:** `'coverage'`
  - `language` `<string>` [SLOCCount](https://w.amazon.com/bin/view/PackageBuilder/CodeCoverage#Languages) supported language **Default:** `'javascript'`
- Returns: `<Promise<void>>`

Copies `coverageDir` to [`brazil.documentationDir`](#brazil-documentationdir) and generates a `coverage-data.txt` file in [`brazil.generatedMakeDir`](#brazil-generatedmakedir) for [Package Builder Code Coverage](https://w.amazon.com/index.php/PackageBuilder/CodeCoverage) (assumes a `clover.xml`, `cobertura-coverage.xml`, or `coverage-summary.json` file exists).

```javascript
await brazil.generateCoverageData();
```

## brazil.generateCoverageDataSync([options])

##### Added in: v1.0

- `options` `<object>`
  - `coverageDir` `<string>` **Default:** `'coverage'`
  - `language` `<string>` [SLOCCount](https://w.amazon.com/bin/view/PackageBuilder/CodeCoverage#Languages) supported language **Default:** `'javascript'`
- Returns: `<void>`

Synchronous version of [`brazil.generateCoverageData()`](#brazil-generatecoveragedata-coveragedir-options-).

```javascript
brazil.generateCoverageDataSync();
```

## generate-coverage-data \[coverageDir\] \[--language <language>\]

##### Added in: v1.0

- `coverageDir` **Default:** `'coverage'`
- `language` [SLOCCount](https://w.amazon.com/bin/view/PackageBuilder/CodeCoverage/#Languages) supported language **Default:** `'javascript'`

Command line version of [`brazil.generateCoverageData()`](#brazil-generatecoveragedata-coveragedir-options-).

```bash
generate-coverage-data
```

## brazil.generatedMakeDir

##### Added in: v1.0

- `<string>`

Absolute path to `generated-make` directory.

## brazil.integOutputDir

##### Added in: v1.0

- `<string>`

Absolute path to `brazil-integ-tests` directory.

## brazil.libDir

##### Added in: v1.0

- `<string>`

Absolute path to `lib` directory.

## brazil.packageIdentifier

##### Added in: v1.0

- `<string>`

Package identifier.

## brazil.packageMajorVersion

##### Added in: v1.0

- `<string>`

Package major version.

## brazil.packageName

##### Added in: v1.0

- `<string>`

Package name.

## brazil.privateDir

##### Added in: v1.0

- `<string>`

Absolute path to `private` directory.

## brazil.runPathRecipe(recipe, [options])

##### Added in: v1.0

- `recipe` `<string>`
- `options` `<object>`
  - `memoize` `<boolean>` **Default:** `true`
- Returns: `<Promise<string>>`

Invokes [`brazil-path`](https://w.amazon.com/index.php/BrazilBuildSystem/Tools/BrazilPath) with `recipe`.

By default, the result of `runPathRecipe` is memoized.
If you use `runPathRecipe` transitively and would like to opt-out, use `BRAZIL_PATH_MEMOIZATION_DISABLED=true` environmental variable.
Note that providing `options.memoize` directly will take precedence over environmental variable.

```javascript
const result = await brazil.runPathRecipe("[NodeJS]pkg.name");

console.log(result);
// Prints: 'NodeJS'
```

## brazil.runPathRecipeSync(recipe, [options])

##### Added in: v1.0

- `recipe` `<string>`
- `options` `<object>`
  - `memoize` `<boolean>` **Default:** `true`
- Returns: `<string>`

Synchronous version of [`brazil.runPathRecipe()`](#brazil-runpathrecipe-recipe-).

By default, the result of `runPathRecipeSync` is memoized.
If you use `runPathRecipeSync` transitively and would like to opt-out, use `BRAZIL_PATH_MEMOIZATION_DISABLED=true` environmental variable.
Note that providing `options.memoize` directly will take precedence over environmental variable.

```javascript
const result = brazil.runPathRecipeSync("[NodeJS]pkg.name");

console.log(result);
// Prints: 'NodeJS'
```

## brazil.srcDir

##### Added in: v1.0

- `<string>`

Absolute path to the package source root.

## brazil.testOutputDir

##### Added in: v1.0

- `<string>`

Absolute path to `brazil-unit-tests` directory.

## brazil.tmpDir

##### Added in: v1.0

- `<string>`

Absolute path to `private/tmp` directory.

## brazil.workspaceRoot

##### Added in: v1.0

- `<string>`

Absolute path to the workspace root.
